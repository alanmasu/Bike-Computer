<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Bike-Project: main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Bike-Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file merge the functionalities of the SD-Part whit the GPS part.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;ti/devices/msp432p4xx/inc/msp.h&gt;</code><br />
<code>#include &lt;ti/devices/msp432p4xx/driverlib/driverlib.h&gt;</code><br />
<code>#include &lt;Hardware/SPI_Driver.h&gt;</code><br />
<code>#include &lt;Hardware/GPIO_Driver.h&gt;</code><br />
<code>#include &lt;Hardware/CS_Driver.h&gt;</code><br />
<code>#include &lt;Hardware/TIMERA_Driver.h&gt;</code><br />
<code>#include &lt;Hardware/SD_Driver.h&gt;</code><br />
<code>#include &lt;fatfs/ff.h&gt;</code><br />
<code>#include &lt;fatfs/diskio.h&gt;</code><br />
<code>#include &lt;Devices/MSPIO.h&gt;</code><br />
<code>#include &lt;<a class="el" href="_d_m_a_module_8h_source.html">DMAModule.h</a>&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;stdint.h&gt;</code><br />
<code>#include &lt;stdbool.h&gt;</code><br />
<code>#include &quot;Test/GPX_Points.h&quot;</code><br />
<code>#include &quot;<a class="el" href="_g_p_x_8h_source.html">GPX.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_g_p_s_8h_source.html">GPS.h</a>&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a1f464e950a4fa11e8821b5c725921a15" id="r_a1f464e950a4fa11e8821b5c725921a15"><td class="memItemLeft" align="right" valign="top"><a id="a1f464e950a4fa11e8821b5c725921a15" name="a1f464e950a4fa11e8821b5c725921a15"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PRINTF</b>(...)&#160;&#160;&#160;MSPrintf(EUSCI_A0_BASE ,__VA_ARGS__)</td></tr>
<tr class="separator:a1f464e950a4fa11e8821b5c725921a15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486d722f52dad2310e7eddcc1e70956b" id="r_a486d722f52dad2310e7eddcc1e70956b"><td class="memItemLeft" align="right" valign="top"><a id="a486d722f52dad2310e7eddcc1e70956b" name="a486d722f52dad2310e7eddcc1e70956b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BTN_START_PORT</b>&#160;&#160;&#160;GPIO_PORT_P5</td></tr>
<tr class="separator:a486d722f52dad2310e7eddcc1e70956b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0dd3d615717545245e280f062c80be09" id="r_a0dd3d615717545245e280f062c80be09"><td class="memItemLeft" align="right" valign="top"><a id="a0dd3d615717545245e280f062c80be09" name="a0dd3d615717545245e280f062c80be09"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BTN_START_PIN</b>&#160;&#160;&#160;GPIO_PIN1</td></tr>
<tr class="separator:a0dd3d615717545245e280f062c80be09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a715116c7c6b5922b13f444ee6d11f490" id="r_a715116c7c6b5922b13f444ee6d11f490"><td class="memItemLeft" align="right" valign="top"><a id="a715116c7c6b5922b13f444ee6d11f490" name="a715116c7c6b5922b13f444ee6d11f490"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BTN_STOP_PORT</b>&#160;&#160;&#160;GPIO_PORT_P3</td></tr>
<tr class="separator:a715116c7c6b5922b13f444ee6d11f490"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0eae14f438f3b67c1db0743ea66f17c8" id="r_a0eae14f438f3b67c1db0743ea66f17c8"><td class="memItemLeft" align="right" valign="top"><a id="a0eae14f438f3b67c1db0743ea66f17c8" name="a0eae14f438f3b67c1db0743ea66f17c8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BTN_STOP_PIN</b>&#160;&#160;&#160;GPIO_PIN5</td></tr>
<tr class="separator:a0eae14f438f3b67c1db0743ea66f17c8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb82e31573e9ace9316238172b2c041f" id="r_afb82e31573e9ace9316238172b2c041f"><td class="memItemLeft" align="right" valign="top"><a id="afb82e31573e9ace9316238172b2c041f" name="afb82e31573e9ace9316238172b2c041f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GPX_TEST_FILENAME</b>&#160;&#160;&#160;&quot;test.gpx&quot;</td></tr>
<tr class="separator:afb82e31573e9ace9316238172b2c041f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adea887e1416a3a64837be17743fb8ba5" id="r_adea887e1416a3a64837be17743fb8ba5"><td class="memItemLeft" align="right" valign="top"><a id="adea887e1416a3a64837be17743fb8ba5" name="adea887e1416a3a64837be17743fb8ba5"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GPX_TEST_FILE</b>&#160;&#160;&#160;file</td></tr>
<tr class="separator:adea887e1416a3a64837be17743fb8ba5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a1496474098ecdf501e317c80b2e2853e" id="r_a1496474098ecdf501e317c80b2e2853e"><td class="memItemLeft" align="right" valign="top"><a id="a1496474098ecdf501e317c80b2e2853e" name="a1496474098ecdf501e317c80b2e2853e"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><b>ComputerState_t</b> { <b>STOP</b> = 0
, <b>START</b> = 1
 }</td></tr>
<tr class="separator:a1496474098ecdf501e317c80b2e2853e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a6288eba0f8e8ad3ab1544ad731eb7667" id="r_a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memItemLeft" align="right" valign="top"><a id="a6288eba0f8e8ad3ab1544ad731eb7667" name="a6288eba0f8e8ad3ab1544ad731eb7667"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (void)</td></tr>
<tr class="separator:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:af5eb7c740b5b08093f2323d18b9f7d1e" id="r_af5eb7c740b5b08093f2323d18b9f7d1e"><td class="memItemLeft" align="right" valign="top"><a id="af5eb7c740b5b08093f2323d18b9f7d1e" name="af5eb7c740b5b08093f2323d18b9f7d1e"></a>
ComputerState_t&#160;</td><td class="memItemRight" valign="bottom"><b>computerState</b> = STOP</td></tr>
<tr class="separator:af5eb7c740b5b08093f2323d18b9f7d1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a296b3c88b34a2294d0bd990ac963543b" id="r_a296b3c88b34a2294d0bd990ac963543b"><td class="memItemLeft" align="right" valign="top"><a id="a296b3c88b34a2294d0bd990ac963543b" name="a296b3c88b34a2294d0bd990ac963543b"></a>
FIL&#160;</td><td class="memItemRight" valign="bottom"><b>file</b></td></tr>
<tr class="separator:a296b3c88b34a2294d0bd990ac963543b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98d493df725185f895d921f2f3263779" id="r_a98d493df725185f895d921f2f3263779"><td class="memItemLeft" align="right" valign="top">eUSCI_UART_ConfigV1&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a98d493df725185f895d921f2f3263779">UART0Config</a></td></tr>
<tr class="memdesc:a98d493df725185f895d921f2f3263779"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART Configuration Parameter.  <br /></td></tr>
<tr class="separator:a98d493df725185f895d921f2f3263779"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fa7587de22424518659d2dfc05d2446" id="r_a7fa7587de22424518659d2dfc05d2446"><td class="memItemLeft" align="right" valign="top">eUSCI_SPI_MasterConfig&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7fa7587de22424518659d2dfc05d2446">SPI0MasterConfig</a></td></tr>
<tr class="memdesc:a7fa7587de22424518659d2dfc05d2446"><td class="mdescLeft">&#160;</td><td class="mdescRight">SPI Configuration Parameter.  <br /></td></tr>
<tr class="separator:a7fa7587de22424518659d2dfc05d2446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52991a2e4fe8bc43bf409dea6197da85" id="r_a52991a2e4fe8bc43bf409dea6197da85"><td class="memItemLeft" align="right" valign="top"><a id="a52991a2e4fe8bc43bf409dea6197da85" name="a52991a2e4fe8bc43bf409dea6197da85"></a>
FATFS&#160;</td><td class="memItemRight" valign="bottom"><b>FS</b></td></tr>
<tr class="separator:a52991a2e4fe8bc43bf409dea6197da85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80e9fe9ad585b4e2066bd1985dddd97" id="r_ab80e9fe9ad585b4e2066bd1985dddd97"><td class="memItemLeft" align="right" valign="top"><a id="ab80e9fe9ad585b4e2066bd1985dddd97" name="ab80e9fe9ad585b4e2066bd1985dddd97"></a>
DIR&#160;</td><td class="memItemRight" valign="bottom"><b>DI</b></td></tr>
<tr class="separator:ab80e9fe9ad585b4e2066bd1985dddd97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d01a8e67c1ca06634080accad7ba50a" id="r_a6d01a8e67c1ca06634080accad7ba50a"><td class="memItemLeft" align="right" valign="top"><a id="a6d01a8e67c1ca06634080accad7ba50a" name="a6d01a8e67c1ca06634080accad7ba50a"></a>
FILINFO&#160;</td><td class="memItemRight" valign="bottom"><b>FI</b></td></tr>
<tr class="separator:a6d01a8e67c1ca06634080accad7ba50a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1d6c61eb3ebf88e94b27ec22717e764" id="r_ae1d6c61eb3ebf88e94b27ec22717e764"><td class="memItemLeft" align="right" valign="top"><a id="ae1d6c61eb3ebf88e94b27ec22717e764" name="ae1d6c61eb3ebf88e94b27ec22717e764"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>btnStartStateP</b> = true</td></tr>
<tr class="separator:ae1d6c61eb3ebf88e94b27ec22717e764"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2aa59a907c9b2dc0d9961ab10c8b3f31" id="r_a2aa59a907c9b2dc0d9961ab10c8b3f31"><td class="memItemLeft" align="right" valign="top"><a id="a2aa59a907c9b2dc0d9961ab10c8b3f31" name="a2aa59a907c9b2dc0d9961ab10c8b3f31"></a>
bool&#160;</td><td class="memItemRight" valign="bottom"><b>btnStopStateP</b> = true</td></tr>
<tr class="separator:a2aa59a907c9b2dc0d9961ab10c8b3f31"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file merge the functionalities of the SD-Part whit the GPS part. </p>
<p>The main function configure all hardware dipendent patr, start a comunication channel whit the L80 module on UART then start the SD card and mount the fatfs file system. After that the main function sample the GPS data and save it on the SD card in a file called "test.gpx" in the root directory. <br  />
</p>
<p>For comunication whit the PC uses EUSCI_A0 and MSPIO library. <br  />
</p>
<p>Hardware part: <br  />
 </p><div class="fragment"><div class="line">           MSP432P401</div>
<div class="line">     -------------------</div>
<div class="line">     |                 |</div>
<div class="line">RST -|     P3.3/UCA0TXD|----&gt; PC RX at 115200 8N1\</div>
<div class="line">     |                 |                          &gt;  =&gt;  (XDS110 USB to UART)</div>
<div class="line">     |     P3.2/UCA0RXD|----&lt; PC TX at 115200 8N1/</div>
<div class="line">     |                 |</div>
<div class="line">     |     P3.5/UCA2TXD|----&gt; GPS RX at 9600 8N1</div>
<div class="line">     |     P3.6/UCA2RXD|----&lt; GPS TX at 9600 8N1</div>
<div class="line">     |                 |</div>
<div class="line">     |   P1.7/UCAB0MISO|----&gt; SD SPI MISO</div>
<div class="line">     |   P1.6/UCAB0MOSI|----&lt; SD SPI MOSI</div>
<div class="line">     |   P1.5/UCAB0SCLK|----&lt; SD SPI CLK</div>
<div class="line">     |             P5.2|----&gt; SD SPI CS</div>
<div class="line">     |                 |</div>
<div class="line">     |             P5.1|----&lt; BTN Start</div>
<div class="line">     |             P3.5|----&lt; BTN Stop</div>
<div class="line">     -------------------</div>
</div><!-- fragment --> <dl class="section date"><dt>Date</dt><dd>10/01/2024 </dd></dl>
<dl class="section author"><dt>Author</dt><dd>Alan Masutti </dd></dl>
</div><h2 class="groupheader">Variable Documentation</h2>
<a id="a7fa7587de22424518659d2dfc05d2446" name="a7fa7587de22424518659d2dfc05d2446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fa7587de22424518659d2dfc05d2446">&#9670;&#160;</a></span>SPI0MasterConfig</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eUSCI_SPI_MasterConfig SPI0MasterConfig</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">     EUSCI_B_SPI_CLOCKSOURCE_SMCLK,</div>
<div class="line">     3000000,</div>
<div class="line">     500000,</div>
<div class="line">     EUSCI_B_SPI_MSB_FIRST,</div>
<div class="line">     EUSCI_B_SPI_PHASE_DATA_CHANGED_ONFIRST_CAPTURED_ON_NEXT,</div>
<div class="line">     EUSCI_B_SPI_CLOCKPOLARITY_INACTIVITY_HIGH,</div>
<div class="line">     EUSCI_B_SPI_3PIN</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>SPI Configuration Parameter. </p>
<p>These are the configuration parameters to make the eUSCI B SPI module to operate with a 500KHz clock. </p>

</div>
</div>
<a id="a98d493df725185f895d921f2f3263779" name="a98d493df725185f895d921f2f3263779"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98d493df725185f895d921f2f3263779">&#9670;&#160;</a></span>UART0Config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">eUSCI_UART_ConfigV1 UART0Config</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div>
<div class="line">     EUSCI_A_UART_CLOCKSOURCE_SMCLK,</div>
<div class="line">     13,</div>
<div class="line">     0,</div>
<div class="line">     37,</div>
<div class="line">     EUSCI_A_UART_NO_PARITY,</div>
<div class="line">     EUSCI_A_UART_LSB_FIRST,</div>
<div class="line">     EUSCI_A_UART_ONE_STOP_BIT,</div>
<div class="line">     EUSCI_A_UART_MODE,</div>
<div class="line">     EUSCI_A_UART_OVERSAMPLING_BAUDRATE_GENERATION</div>
<div class="line">}</div>
</div><!-- fragment -->
<p>UART Configuration Parameter. </p>
<p>These are the configuration parameters to make the eUSCI A UART module to operate with a 115200 baud rate. These values were calculated using the online calculator that TI provides at: <a href="http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSP430BaudRateConverter/index.html">http://software-dl.ti.com/msp430/msp430_public_sw/mcu/msp430/MSP430BaudRateConverter/index.html</a> </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
